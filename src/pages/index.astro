---
import { getLatestSeason, getCanonical } from "@/utils/seasons";
import Layout from "@/layouts/Layout.astro";
import MapIsland from "@/components/react/map/MapIsland";

const latest = await getLatestSeason();

if (!latest) {
  throw new Error("No season data found.");
}

const canonical = getCanonical(`/map/${latest.id}`, Astro.site);
---

<Layout
  title={"FTC Map - " + latest.id + " Season"}
  canonical={canonical}
  year={latest.id}
>
  <MapIsland
    client:only="react"
    teams={latest.data.teams}
    events={latest.data.events}
    year={parseInt(latest.id)}
  />
</Layout>
