---
import Layout from "@/layouts/Layout.astro";
import MapIsland from "@/components/react/map/MapIsland.tsx";
import "leaflet/dist/leaflet.css";
import { getEntry } from "astro:content";

export async function getStaticPaths() {
  return [
    { params: { year: "2019" } },
    { params: { year: "2020" } },
    { params: { year: "2021" } },
    { params: { year: "2022" } },
    { params: { year: "2023" } },
    { params: { year: "2024" } },
    { params: { year: "2025" } },
  ];
}

const { year } = Astro.params;
const entry = await getEntry("seasons", year);

if (!entry) {
  throw new Error(`No season data found for year: ${year}`);
}

const seasonData = entry.data;
---

<Layout title={"FTC Map " + Astro.params.year}>
  <div class="h-screen w-screen">
    <MapIsland client:only="react" seasonData={seasonData} />
  </div>
</Layout>
