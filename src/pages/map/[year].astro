---
import Layout from "@/layouts/Layout.astro";
import MapIsland from "@/components/react/map/MapIsland.tsx";
import "leaflet/dist/leaflet.css";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const allSeasons = await getCollection("seasons");

  return allSeasons.map((entry) => ({
    params: { year: entry.id }, // entry.id comes from the filename (e.g., "2024")
    props: { seasonData: entry.data }, // Pass data as props to avoid double-fetching
  }));
}

// Get data from props (more efficient than getEntry since we already have it)
const { seasonData } = Astro.props;
const { year } = Astro.params;
---

<Layout title={"FTC Map " + year} year={year}>
  <MapIsland client:only="react" seasonData={seasonData} />
</Layout>
