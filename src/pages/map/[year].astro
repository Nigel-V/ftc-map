---
import Layout from "@/layouts/Layout.astro";
import Map from "@/components/Map.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const allSeasons = await getCollection("seasons");

  return allSeasons.map((entry) => ({
    params: { year: entry.id }, // entry.id comes from the filename (e.g., "2024")
    props: { seasonData: entry.data }, // Pass data as props to avoid double-fetching
  }));
}

// Get data from props (more efficient than getEntry since we already have it)
const { seasonData } = Astro.props;
const { year } = Astro.params;
---

<Layout title={"FTC Map - " + year + " Season"} year={year}>
  <!-- <MapIsland
    client:only="react"
    teams={seasonData.teams}
    events={seasonData.events}
    year={parseInt(year)}
  /> -->
  <Map year={year} />
</Layout>
